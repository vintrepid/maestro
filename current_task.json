{
  "for_next_maestro_session": true,
  "task": "update_bundles_track_json",
  "version": "4.1.0",
  "project": "Maestro",
  "session": "session_4_ready",
  "status": "queued",
  "branch": "feature/task-runner",
  
  "your_task": {
    "task_id": 27,
    "title": "Update bundles.track to JSON format",
    "parent_task": 25,
    "maestro_url": "http://localhost:4004/tasks/27/edit",
    "estimated_time": "40 minutes",
    "priority": "high",
    "context": "Phase 2 of centralized logging. Phase 1 (directory structure + docs) is complete."
  },
  
  "what_session_3_learned": {
    "task_25_completed": "Directory structure + README done",
    "task_25_failed": "Tried to rewrite bundles.track without reading code first",
    "lesson": "Read existing code BEFORE modifying. Make incremental changes. Test each step.",
    "what_worked": "Created comprehensive log format documentation",
    "what_didnt": "Jumped to implementation without understanding current code"
  },
  
  "critical_guidance": {
    "read_code_first": [
      "lib/mix/tasks/bundles.track.ex - Current implementation",
      "~/dev/maestro/.bundles_track_session - Current session state", 
      "~/dev/maestro/GUIDELINE_USAGE_TRACKER.md - Current log format"
    ],
    "approach": "INCREMENTAL - Add JSON alongside existing, don't rewrite",
    "test_strategy": "Test JSON manually first, then automate",
    "if_stuck": "Read code again. Test manually. Ask user."
  },
  
  "task_27_steps": [
    "1. READ lib/mix/tasks/bundles.track.ex thoroughly",
    "2. Document how current code works",
    "3. Test JSON output manually (create file by hand)",
    "4. Add JSON output function (keep old format)",
    "5. Test all commands (init, ref, summary)",
    "6. Verify JSON with jq",
    "7. Only then remove old format (optional)"
  ],
  
  "success_criteria_task_27": [
    "mix bundles.track init creates JSON file",
    "mix bundles.track ref appends to JSON",
    "mix bundles.track summary updates JSON",
    "JSON validates with jq",
    "All existing functionality still works"
  ],
  
  "files_already_created": {
    "by_task_25": [
      "~/dev/agents/logs/{maestro,circle,ready,calvin,san_juan,new_project}/",
      "~/dev/agents/logs/README.md (comprehensive log format spec)"
    ]
  },
  
  "queue_after_27": [
    {
      "task_id": 26,
      "title": "Run Task button should stay on page",
      "type": "simple UI fix",
      "time": "~5 minutes"
    },
    {
      "task_id": 28,
      "title": "Selective usage_rules for smaller startup",
      "type": "discussion",
      "note": "Analyze if we should split USAGE_RULES.md"
    },
    {
      "task_id": 23,
      "title": "Coordination efficiency discussion",
      "type": "discussion",
      "note": "When Maestro does work vs assigns to other projects"
    }
  ],
  
  "the_pattern_so_far": {
    "session_2": "Established Task Runner Pattern, created mix tasks, validated coordination",
    "session_3": "Attempted logging Phase 2, learned to read code first, completed Phase 1",
    "session_4": "Your turn - implement bundles.track JSON output incrementally",
    "working": true,
    "improving": true
  },
  
  "reminder": "The Task #27 description has DETAILED guidance. Read it carefully. It tells you exactly what to read and what order to do things. Don't skip steps!"
}
