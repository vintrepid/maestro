digraph GuidelineConcepts {
  rankdir=LR;
  node [shape=box, style=filled];
  
  // Core concepts
  node [fillcolor=lightblue];
  git [label="Git Workflow\n(GUIDELINES)"];
  verification [label="Code Verification\n(GUIDELINES)"];
  communication [label="Communication\n(GUIDELINES)"];
  
  // Database concepts
  node [fillcolor=lightgreen];
  db_pk [label="Primary Keys\n(GUIDELINES)"];
  ash_resource [label="Ash Resources\n(GUIDELINES)"];
  poly_relations [label="Polymorphic Relations\n(POLYMORPHIC_RELATIONS)"];
  migrations [label="Data Migrations\n(GUIDELINES)"];
  
  // UI/Frontend concepts
  node [fillcolor=lightyellow];
  phoenix [label="Phoenix Patterns\n(LIVEVIEW)"];
  liveview [label="LiveView\n(LIVEVIEW)"];
  daisyui [label="DaisyUI Components\n(DAISYUI)"];
  css [label="CSS Standards\n(DAISYUI)"];
  
  // Tools
  node [fillcolor=lightcoral];
  css_linter [label="CSS Linter\n(usage_rules)"];
  live_table [label="LiveTable\n(LIVE_TABLE)"];
  fly [label="Fly Deployment\n(FLY_DEPLOYMENT)"];
  
  // Project-specific (from READMEs)
  node [fillcolor=plum];
  calvin_domain [label="Calvin Business\n(calvin/README)"];
  sanjuan_domain [label="SanJuan Analytics\n(sanjuan/README)"];
  maestro_coord [label="Maestro Coordination\n(maestro/README)"];
  
  // Relationships - Database flow
  db_pk -> ash_resource [label="used in"];
  ash_resource -> poly_relations [label="implements"];
  ash_resource -> migrations [label="creates"];
  poly_relations -> migrations [label="requires"];
  migrations -> verification [label="requires"];
  
  // Relationships - UI flow
  phoenix -> liveview [label="includes"];
  liveview -> daisyui [label="styles with"];
  daisyui -> css [label="defines"];
  css -> css_linter [label="analyzed by"];
  
  // Relationships - LiveView patterns
  liveview -> live_table [label="can use"];
  live_table -> daisyui [label="styled with"];
  
  // Relationships - Development flow
  git -> verification [label="before merge"];
  verification -> communication [label="report via"];
  
  // Relationships - Database & UI intersection
  ash_resource -> liveview [label="displayed in"];
  poly_relations -> liveview [label="displayed in"];
  db_pk -> calvin_domain [label="applied in"];
  db_pk -> sanjuan_domain [label="applied in"];
  poly_relations -> maestro_coord [label="used in tasks"];
  
  // Relationships - Project coordination
  maestro_coord -> calvin_domain [label="coordinates"];
  maestro_coord -> sanjuan_domain [label="coordinates"];
  maestro_coord -> git [label="manages via"];
  
  // Relationships - Tools & Concepts
  css_linter -> maestro_coord [label="integrated in"];
  live_table -> sanjuan_domain [label="used in"];
  live_table -> calvin_domain [label="used in"];
  
  // Deployment
  liveview -> fly [label="deployed via"];
  ash_resource -> fly [label="deployed via"];
  fly -> verification [label="tested after"];
  
  // Subgraphs for organization
  subgraph cluster_core {
    label="Core Guidelines";
    style=filled;
    color=lightgrey;
    git; verification; communication;
  }
  
  subgraph cluster_data {
    label="Database Layer";
    style=filled;
    color=lightgrey;
    db_pk; ash_resource; poly_relations; migrations;
  }
  
  subgraph cluster_ui {
    label="UI Layer";
    style=filled;
    color=lightgrey;
    phoenix; liveview; daisyui; css;
  }
  
  subgraph cluster_tools {
    label="Tools & Infrastructure";
    style=filled;
    color=lightgrey;
    css_linter; live_table; fly;
  }
  
  subgraph cluster_projects {
    label="Projects";
    style=filled;
    color=lightgrey;
    calvin_domain; sanjuan_domain; maestro_coord;
  }
}
